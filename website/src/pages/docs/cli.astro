---
import DocsLayout from '../../layouts/DocsLayout.astro';
---

<DocsLayout title="CLI">
  <h1>Command Line Interface</h1>
  
  <p class="lead">
    Use the MDZ CLI to validate, build, and inspect skills.
  </p>

  <h2>Installation</h2>
  
  <pre><code class="language-bash">npm install -g zenmarkdown</code></pre>

  <h2>Commands</h2>
  
  <h3>check</h3>
  
  <p>Validate a skill for errors—the primary command:</p>
  
  <pre><code class="language-bash">zen check &lt;file&gt;</code></pre>
  
  <p>
    This validates syntax, references, type contracts, and dependencies. Errors are 
    caught here—before the LLM ever sees the skill.
  </p>

  <h4>What It Checks</h4>
  
  <ul>
    <li><strong>Syntax</strong> — Valid zen constructs</li>
    <li><strong>References</strong> — <code>[[skill]]</code> targets exist</li>
    <li><strong>Types</strong> — Contracts match across boundaries</li>
    <li><strong>Dependencies</strong> — No circular references</li>
    <li><strong>Scope</strong> — Variables defined before use</li>
  </ul>

  <h4>Example</h4>
  
  <pre><code class="language-bash">zen check my-skill.mdz

✓ Syntax valid
✓ 3 references resolved
✓ 2 type contracts verified
✓ No circular dependencies

my-skill.mdz is valid</code></pre>

  <h3>build</h3>
  
  <p>Preprocess a skill (optional—only needed for macros or reference inlining):</p>
  
  <pre><code class="language-bash">zen build &lt;file&gt; [options]</code></pre>

  <h4>Options</h4>
  
  <ul>
    <li><code>-o, --output &lt;file&gt;</code> — Write output to file</li>
    <li><code>-V, --verbose</code> — Show build statistics</li>
    <li><code>--inline-refs</code> — Inline referenced skill content</li>
  </ul>
  
  <p>
    Build resolves macros (<code>&#123;&#123;IF&#125;&#125;</code> constructs) and optionally 
    inlines references. The output is still markdown—just with build-time decisions resolved.
  </p>

  <h4>Example</h4>
  
  <pre><code class="language-bash"># Preprocess and write to dist/
zen build skill.mdz -o ./dist

# Inline all referenced skills
zen build skill.mdz --inline-refs -o ./dist</code></pre>

  <h3>parse</h3>
  
  <p>Output the AST as JSON (useful for tooling integration):</p>
  
  <pre><code class="language-bash">zen parse &lt;file&gt;</code></pre>

  <h3>graph</h3>
  
  <p>Visualize the dependency graph:</p>
  
  <pre><code class="language-bash">zen graph &lt;directory&gt;</code></pre>
  
  <p>
    Shows how skills reference each other. Useful for understanding complex agent systems.
  </p>

  <h2>Exit Codes</h2>
  
  <ul>
    <li><code>0</code> — Success (validation passed, build complete)</li>
    <li><code>1</code> — Error (validation failed, file not found, etc.)</li>
  </ul>

  <h2>Integration with CI/CD</h2>
  
  <p>
    Run <code>zen check</code> in your pipeline to catch errors before deployment:
  </p>
  
  <pre><code class="language-yaml"># GitHub Actions example
- name: Validate skills
  run: mdz check ./skills/**/*.mdz</code></pre>
</DocsLayout>
